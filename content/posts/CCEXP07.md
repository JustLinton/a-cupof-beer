---
title: 节拍发生器的原理
date: 2021-04-14 15:13:06
tags: [算法]
categories: [计算机组成与设计,实验]
summary: 自制CPU第一步（）

---



## 题目描述



## 连续节拍发生器

![](https://z3.ax1x.com/2021/04/14/c6YWPf.jpg)



### D-触发器的原理

#### D-触发器

D-触发器就是一个一位的寄存器。



#### 优先级

对于D触发器，其CLR的优先级大于PRN，PRN优先级又大于CLK。

| 引脚 | 作用                                                         |
| ---- | ------------------------------------------------------------ |
| CLK  | 上升沿触发，相当于把D的值存进触发器，使Q的值一直为D，除非被清零。 |
| PRN  | 让Q强制输出1。不管CLK如何。                                  |
| CLR  | 清零。只要其有效，Q端就是0.                                  |



### 连续节拍发生器原理

一开始RST为0，节拍2、3、4对应的触发器的CLR处于有效状态，输出都是0；节拍1对应的触发器的PRN有效，在不受CLK的控制下强制输出1，所以脉冲会呈现第一拍常亮的状态；

将RST置为1，则第二拍触发器立即置为1，并输出1；与此同时第一拍触发器立即置为0，并输出0.

在第二拍内，四个触发器的Q端分别是0100.下一脉冲到达时，第三拍触发器被第二排的输出置1，同时第二拍触发器置0.以此类推。随着拍数增加，拍子的编号总是对4取模的。当发生器工作了起来，四个触发器就是平等的了。

当RST变为0时，2、3、4拍的触发器都被清零并无法被赋值。节拍停止发生。



## 单步节拍发生器

![](https://z3.ax1x.com/2021/04/14/c6Y2IP.jpg)



#### 原理

这个发生器和前者的区别在于它由五个触发器构成。



#### 关于顶上那个或非门

第一拍的输入是由四个节拍的脉冲或非而来。这意味着，如果发生器正在工作，则第一拍永远输入0，这样可以防止错乱（即在后续的脉冲点亮的时候，第一拍又发出一次脉冲）。



#### 如何实现暂停发生

在第五拍的整个过程中，第五个触发器都是输出高电平，但是此过程中节拍信号是先下降沿，后上升沿。下降沿发生在节拍的中间位置，上升沿发生在节拍末尾。由于第五拍的输出与节拍进行或运算，在第五拍中，实际到达触发器的CLK信号都是恒为高电平。

因此可以认为，第五排拍，第五个触发器的持续高电平把CLK的上升沿掩盖了。触发器需要上升沿才能被触发，但是所有触发器都收不到上升沿（包括关键的第一号触发器），整个发生器就处于暂停状态了。



#### 如何恢复节拍发生

但是注意：在第五拍时，第五个触发器输出1，且前四个触发器都是0，此时第一个触发器有1的输入。这意味着，虽然发生器暂停了工作，但是一号触发器是一直有高电平输入的。因此，如果此时给予一个清零信号，五号触发器被清零，则上升沿将不再被掩盖，一号触发器就可以在收到上升沿时直接触发一个高电平信号，整个发生器又开始运行了。